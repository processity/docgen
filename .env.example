# Node.js Server Configuration
PORT=8080
NODE_ENV=development

# Salesforce Authentication
# Choose ONE of the following authentication methods:

# Option 1: JWT Bearer Flow (Production/Connected App) - T-09
# Requires Connected App with Certificate configured in Salesforce
SF_DOMAIN=your-instance.my.salesforce.com
SF_USERNAME=integration-user@your-org.com
SF_CLIENT_ID=3MVG9...your_connected_app_client_id
# Private key (PEM format, use \n for line breaks or base64-encoded)
# In production, this will be fetched from Azure Key Vault (T-16)
SF_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANB...your_private_key...\n-----END PRIVATE KEY-----

# Option 2: SFDX Auth URL (Development/Scratch Orgs/CI)
# Simpler authentication using refresh token from sf CLI
# Get auth URL: sf org display --verbose --json | jq -r '.result.sfdxAuthUrl'
# Format: force://<clientId>:<clientSecret>:<refreshToken>@<instanceUrl>
# Example: SFDX_AUTH_URL=force://PlatformCLI::!1234567890abcdef@test.salesforce.com
# Note: SFDX Auth URL takes precedence if both methods are configured
#SFDX_AUTH_URL=

# Azure AD Configuration (for Inbound JWT Validation - T-08)
# These values are from azure-ad-config.md
AZURE_TENANT_ID=d8353d2a-b153-4d17-8827-902c51f72357
CLIENT_ID=f42d24be-0a17-4a87-bfc5-d6cd84339302
ISSUER=https://login.microsoftonline.com/d8353d2a-b153-4d17-8827-902c51f72357/v2.0
AUDIENCE=api://f42d24be-0a17-4a87-bfc5-d6cd84339302
JWKS_URI=https://login.microsoftonline.com/d8353d2a-b153-4d17-8827-902c51f72357/discovery/v2.0/keys

# Azure Key Vault (for Production Secrets - T-16)
KEY_VAULT_URI=https://your-keyvault.vault.azure.net/

# Image Allowlist (comma-separated domains)
IMAGE_ALLOWLIST=cdn.example.com,images.company.com

# LibreOffice Configuration
LIBREOFFICE_CONCURRENCY=8
LIBREOFFICE_TIMEOUT_MS=60000

# Observability (T-15)
# Azure Application Insights connection string (from Azure Portal)
# Format: InstrumentationKey=<key>;IngestionEndpoint=https://<region>.in.applicationinsights.azure.com/;LiveEndpoint=https://<region>.livediagnostics.monitor.azure.com/
AZURE_MONITOR_CONNECTION_STRING=InstrumentationKey=your-instrumentation-key-here
# Optional: Disable telemetry (enabled by default in non-test environments)
# ENABLE_TELEMETRY=false

# Poller Configuration (T-14)
POLLER_INTERVAL_MS=15000
POLLER_BATCH_SIZE=50
POLLER_LOCK_TTL_MINUTES=2
POLLER_MAX_RETRIES=3
